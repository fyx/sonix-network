<html>
<head>
<title>SONIX usage charts</title>
<link href="https://getbootstrap.com/docs/5.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/luxon@2.0.1/build/global/luxon.min.js" integrity="sha256-BdqBGuaawDzMtW2Wn9ISUuYKUY/A7d5NVcj6Ix3jwv8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" crossorigin="anonymous" integrity="sha384-fYxN7HsDOBRo1wT/NSZ0LkoNlcXvpDpFy6WzB42LxuKAX7sBwgo7vuins+E1HCaw"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" crossorigin="anonymous" integrity="sha384-i+dHPTzZw7YVZOx9lbH5l6lP74sLRtMtwN2XjVqjf3uAGAREAF4LMIUDTWEVs4LI"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datasource-prometheus@1.0.1/dist/chartjs-plugin-datasource-prometheus.umd.js" integrity="sha256-8PUptyrOPE8toUkO6117GlFu2omSvRd/nUc10YuKlcw=" crossorigin="anonymous"></script>
<style>
.modal-dialog {
  max-width: 760px;
}
.graph {
  width: auto;
  margin: 4rem auto;
  margin-top:0;
  margin-bottom:0;
}
</style>
</head>
<body>
<div class="px-4 text-center">
<img class="d-block mx-auto mb-4" src="https://user-images.githubusercontent.com/149442/127568538-558bc9fa-3180-4bbb-8637-c514df976ffe.png" alt="SONIX logo">
<div class="col-lg-6 mx-auto">
<p class="lead">
Graphs, graphs, graphs.
</p>
</div>
</div>
</div>

<div class="modal-dialog" role="document">
<div class="modal-content rounded-12 shadow">
<div class="modal-header border-bottom-0"><h5>Graph #1</h5></div>
<div class="modal-body py-0">
<canvas class="graph" id="ctx1"></canvas>
</div>
</div>
</div>

<div class="modal-dialog" role="document">
<div class="modal-content rounded-12 shadow">
<div class="modal-header border-bottom-0"><h5>Graph #2</h5></div>
<div class="modal-body py-0">
<canvas class="graph" id="ctx2"></canvas>
</div>
</div>
</div>

<div class="modal-dialog" role="document">
<div class="modal-content rounded-12 shadow">
<div class="modal-header border-bottom-0"><h5>Graph #3</h5></div>
<div class="modal-body py-0">
<canvas class="graph" id="ctx3"></canvas>
</div>
</div>
</div>

<div class="px-4 text-center">
<div class="col-lg-6 mx-auto">
<p class="mt-4">
Contact: <a href="https://github.com/kamelnetworks/sonix-network">GitHub</a>
</p>
<i>We like to go fast.</i>
</p>
</div>
</div>
</div>

<script>

function foobar(m) {
  return m.labels.job
}

var myChart = new Chart(ctx1, {
  type: 'line',
  plugins: [ChartDatasourcePrometheusPlugin],
  options: {
    animation: {
      duration: 0,
    },
    plugins: {
      'datasource-prometheus': {
        prometheus: {
          endpoint: "http://demo.robustperception.io:9090",
          baseURL: "/api/v1",   // default value
        },
        findInLabelMap: foobar,
        query: 'sum by (job) (go_gc_duration_seconds)',
        timeRange: {
          type: 'relative',

          // from 12 hours ago to now
          start: -12 * 60 * 60 * 1000,
          end: 0,
        },
      },
    },
  },
});


var myChart = new Chart(ctx2, {
  type: 'line',
  plugins: [ChartDatasourcePrometheusPlugin],
  options: {
    animation: {
      duration: 0,
    },
    plugins: {
      'datasource-prometheus': {
        prometheus: {
          endpoint: "http://demo.robustperception.io:9090",
          baseURL: "/api/v1",   // default value
        },
        findInLabelMap: foobar,
        query: 'sum by (job) (go_gc_duration_seconds)',
        timeRange: {
          type: 'relative',

          // from 12 hours ago to now
          start: -12 * 60 * 60 * 1000,
          end: 0,
        },
      },
    },
  },
});


var myChart = new Chart(ctx3, {
  type: 'line',
  plugins: [ChartDatasourcePrometheusPlugin],
  options: {
    animation: {
      duration: 0,
    },
    plugins: {
      'datasource-prometheus': {
        prometheus: {
          endpoint: "http://demo.robustperception.io:9090",
          baseURL: "/api/v1",   // default value
        },
        findInLabelMap: foobar,
        query: 'sum by (job) (go_gc_duration_seconds)',
        timeRange: {
          type: 'relative',

          // from 12 hours ago to now
          start: -12 * 60 * 60 * 1000,
          end: 0,
        },
      },
    },
  },
});
</script>
</body>
</html>
